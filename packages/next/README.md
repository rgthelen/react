# Next.js

## Installation

Simply run `npm install @rownd/next` or `yarn add @rownd/next`.

### Setup

In the root `layout.tsx` of your app:

```jsx
import { NextJSRowndProvider } from '@rownd/next';

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode,
}>) {
  return (
    <html lang="en">
      <body>
        <NextJSRowndProvider
          appKey="<your app key>"
          apiUrl="<your api url>"
          hubUrlOverride="<your hub url>"
        >
          {children}
        </NextJSRowndProvider>
      </body>
    </html>
  );
}
```

### NextJSRowndProvider props

- `appKey` (required): This is the key generated by the [Rownd dashboard](https://app.rownd.io).
- `apiUrl` (optional): The URL of your Rownd API instance.
- `hubUrlOverride` (optional): The URL of your Rownd Hub instance.

Later on within your app's components, you can use the Rownd hook to access the Rownd browser API:

```jsx
import React from 'react';
import { useRownd } from '@rownd/next';

export default function MyProtectedComponent(props) {
  const { is_authenticated, user, requestSignIn, is_initializing } = useRownd();

  useEffect(() => {
    if (!is_authenticated && !is_initializing) {
      requestSignIn();
    }
  }, [is_authenticated, is_initializing]);

  return (
    <div>
      {is_authenticated ? (
        <div>
          <h1>Welcome {user.data.full_name}</h1>
          <button onClick={() => getAccessToken()}>Get access token</button>
        </div>
      ) : (
        <div>
          <h1>Please sign in to continue</h1>
        </div>
      )}
    </div>
  );
}
```

### API reference

Please see the [React SDK](/rownd/react/blob/main?tab=readme-ov-file#api-reference) for details on
Rownd Client React API's.